<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>
<body onload="initialRequest()">
<canvas id="pic">Ваш браузер не поддерживает кеки...</canvas>
<!--<div>Первое слово на изображении подходит к нему  <button id="result1" onclick="changeText(this.id)">Да</button></div>
<div>Второе слово на изображении подходит к нему  <button id="result2" onclick="changeText(this.id)">Да</button></div>
<div>Третье слово на изображении подходит к нему  <button id="result3" onclick="changeText(this.id)">Да</button></div>
<div>Первое слово на изображении подходит ко второму  <button id="result4" onclick="changeText(this.id)">Да</button></div>
<div>Первое слово на изображении подходит к третьему  <button id="result5" onclick="changeText(this.id)">Да</button></div>
<div>Второе слово на изображении подходит к третьему  <button id="result6" onclick="changeText(this.id)">Да</button></div> -->
<button id="send" onclick="initialRequest()">ЭТА КНОПКА КРАСНАЯ И НА НЕЙ НАПИСАНО "ИСЧО"</button>
<script>
    /*function requestKek()
    {
        let form = "";
        if (document.getElementById(result1).textContent === "Да") form += '1 ';
        else form += '0 ';
        if (document.getElementById(result2).textContent === "Да") form += '1 ';
        else form += '0 ';
        if (document.getElementById(result3).textContent === "Да") form += '1   ';
        else form += '0 ';
        if (document.getElementById(result4).textContent === "Да") form += '1 ';
        else form += '0 ';
        if (document.getElementById(result5).textContent === "Да") form += '1 ';
        else form += '0 ';
        if (document.getElementById(result6).textContent === "Да") form += '1';
        else form += '0';
        let url = new URL('http://localhost:8080/g1');
        url.searchParams.set('form', form);
        let xhr = new XMLHttpRequest();
        xhr.open("GET", url, [true]);
        xhr.send();
        xhr.onload = function() {
            if (xhr.status != 200) {
                alert(`Ошибка ${xhr.status}: ${xhr.statusText}`);
            }
            else {
                var canvas = document.getElementById('pic');

                if (canvas.getContext){
                    painter(xhr.response);
                } else {
                    alert("Ваш браузер не поддерживает кеки...");
                }
            }
        };
    }
    function changeText(id)
    {
        if ( document.getElementById(id).textContent == "Да") document.getElementById(id).textContent = "Нет"
        else document.getElementById(id).textContent = "Да"
    } */

    function painter(line){

        var ctx = document.getElementById("pic").getContext("2d");
        ctx.drawImage(line.image.toString('base64'), 0, 0, line.width*2, line.height*2);
    }




    /*function painter() {
        var canvas = document.getElementById('pic');
        var ctx = canvas.getContext("2d");

        ctx.fillStyle = "rgb(200,0,0)";
        ctx.fillRect (10, 10, 55, 50);

        ctx.fillStyle = "rgba(0, 0, 200, 0.5)";
        ctx.fillRect (30, 30, 55, 50);
    }*/

    function initialRequest() {
        let url = new URL('http://localhost:8080/g1');
        let xhr = new XMLHttpRequest();
        xhr.open("GET", url, [true]);
        xhr.send();
        xhr.onload = function() {
            if (xhr.status != 200) {
            alert(`Ошибка ${xhr.status}: ${xhr.statusText}`);
            }
        else {
                var canvas = document.getElementById('pic');

                if (canvas.getContext){
                    painter(xhr.response);
                } else {
                    alert("Ваш браузер не поддерживает кеки...");
                }
            }
        };

    }
</script>
</body>
</html>